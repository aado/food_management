<!DOCTYPE html>
<html lang="en">
<head>
<title> INVENTORY </title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="style.css" rel="stylesheet" type="text/css">
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/css"> -->
<link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">

</head>
<!-- This snippet uses Font Awesome 5 Free as a dependency. You can download it at fontawesome.io! -->
<body>
    <div class="container"> 
        <div class="row"> 
            <div class="col-md-6">
                <div class="card">
                    <form  class="box">
                        <h1>Login</h1>
                        <input type="text" name="uname" id="uname" placeholder="Username">
                        <!-- <input type="password" name="pword"  id="pword" placeholder="Password"> -->
                        <input type="button" name="submitData" id="submitData" value="Login">
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

 <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
  import { getDatabase, ref, set, onValue, child, get } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js"; 
  


  //import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAJe8LyXxISlifBL0I_x3IpY1Y3T7n2TKA",
    authDomain: "inventory-d3be8.firebaseapp.com",
    projectId: "inventory-d3be8",
    storageBucket: "inventory-d3be8.appspot.com",
    messagingSenderId: "672216838490",
    appId: "1:672216838490:web:4939043d8f2cf4a7108363",
    measurementId: "G-2HQPKLJHCB"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  // const analytics = getAnalytics(app);

  submitData.addEventListener('click',(e) =>{

    var username = document.getElementById('uname').value;
    //var password = document.getElementById('pword').value;

// const newKey = push(child(ref(database), 'users')).key;

    // set(ref(database, 'users/' + username), {
    //         username: username,
    //         password: password
    //     }).then(() => {
    //         // Data saved successfully!
    //         //alert('data submitted');
    //         if (username == username) {
    //            
    //         }
             
    //     })
    //         .catch((error) => {
    //             // The write failed...
    //             alert(error);
    // });

    // const starCountRef = ref(database, 'users/' + username );
    // onValue(starCountRef, (snapshot) => {
    //   const data = snapshot.val();
    //   if (username === username) {
    //     window.location = 'home.html';
    //   }else{
    //     window.location = 'index.html';
    //   }
    //   });

const dbRef = ref(getDatabase());
    get(child(dbRef, `users/${username}`)).then((snapshot) => {
  if (snapshot.exists()) {
    // console.log(snapshot.val());
    window.location = 'home.html';
  } else {
    // console.log("No data available");
    window.location = 'index.html';
    alert('Please input correct username');
  }
}).catch((error) => {
  console.error(error);
});

  });
</script>